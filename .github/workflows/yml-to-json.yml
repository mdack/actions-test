name: YAML to JSON
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [ push ]
jobs:
    verify-json-validation:
        runs-on: ubuntu-latest
        steps:
            - name: Set foobar to cool
              uses: mikefarah/yq@master
              with:
                cmd: yq r --prettyPrint -j test/test-yaml.yml > test-json.json
            - name: Get an entry with a variable that might contain dots or spaces
              id: get_username
              uses: mikefarah/yq@master
              with:
                cmd: yq '.all.children.["${{ matrix.ip_address }}"].username' ops/inventories/production.yml
            - name: Reuse a variable obtained in another step
              run: echo ${{ steps.get_username.outputs.result }}
            - name: Create JSON file
              run: cp test-json.json data.json
              working-directory: test
            - uses: actions/checkout@v1
            - name: Validate JSON
              uses: docker://orrosenblatt/validate-json-action:latest
              env:
                INPUT_SCHEMA: schema.json
                INPUT_JSONS: test/test-json.json
 